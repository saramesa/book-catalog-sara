(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/books-logo.fa8ca107.png"},107:function(e,t,a){e.exports=a(198)},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);a(108);var n=a(0),l=a.n(n),r=a(30),o=a.n(r),i=a(201),c=(a(148),a(32)),s=a(68),d=a(12),m=a(13),u=a(15),h=a(14),g=a(16),b=a(3),k=(a(149),{API_URL:"https://cors-anywhere.herokuapp.com/https://saramesa-book-catalog.firebaseapp.com/api/catalog",DEFAULT_PICTURE:"https://www.feriachilenadellibro.cl/pub/media/catalog/product/cache/1/image/200x256/e9c3970ab036de70892d86c6d221abfe/2/8/286517.jpg"});a(150);var p=a(100),f=a.n(p),E=(a(151),function(e){var t=e.size;return l.a.createElement("div",{className:"logo__container ".concat(t)},l.a.createElement("img",{src:f.a,alt:"Logo",className:"logo__image"}))}),O=(a(152),a(153),a(200)),v=function(e){var t=e.title,a=e.url;return l.a.createElement(O.a,{to:a,className:"menu__link"},l.a.createElement("li",{className:"menu__item"},t))},B=function(){return l.a.createElement("nav",{className:"nav-menu"},l.a.createElement("ul",{className:"menu-list"},l.a.createElement(v,{title:"Catalog",url:"/"}),l.a.createElement(v,{title:"Edit",url:"/edit"})))},C=function(e){function t(){return Object(d.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("header",{className:"app__header"},l.a.createElement(E,{size:"logo__container--header"}),l.a.createElement(B,null))}}]),t}(n.Component),y=a(203),j=a(202),D=(a(156),a(157),function(e,t){t(e)}),N=function(e){var t=e.handleFilterChange,a=e.filtersChecked;return e.genres.map(function(e){return l.a.createElement("span",{className:"filter-item",key:e,style:{backgroundColor:a.indexOf(e)>=0?"#2195BA":"white"},id:e,onClick:D.bind(void 0,e,t)},e)})},w=function(e){var t=e.handleFilterChange,a=e.filtersChecked,n=e.isFilterClicked,r=e.genres;return l.a.createElement("div",{className:"filters-container"},l.a.createElement(N,{genres:r,handleFilterChange:t,filtersChecked:a,isFilterClicked:n}))},A=(a(158),a(5)),I=a.n(A),G=a(4),S=a.n(G),x=a(102),F=a.n(x),_=(a(159),function(){return l.a.createElement("div",{className:"loader"},l.a.createElement("img",{alt:"Loading",src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif"}))}),L=(a(160),a(101)),M=a.n(L),T=function(e,t,a){a(e,t)},U=function(e){var t=e.genres,a=e.showDeleteButton,n=e.bookid,r=e.handleDeleteGenre;return t.map(function(e){return l.a.createElement("div",{key:e},l.a.createElement(M.a,{variant:"secondary",className:"badge-genre",key:e},e),a?l.a.createElement("span",null,l.a.createElement("i",{className:"far fa-times-circle fa-times-custom",id:e,onClick:T.bind(void 0,e,n,r)})):null)})},z=function(e){var t=e.books,a=e.isLoaded,n=e.error;return n?l.a.createElement("div",null,"Error: ",n.message):a?l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"col-md-1"}),l.a.createElement(S.a,{className:"col-md-10"},l.a.createElement("ul",{className:"book-list"},t.map(function(e){return l.a.createElement("li",{className:"book-list-item",key:e.id},l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"book__card-image-container"},l.a.createElement(F.a,{className:"book__card-image",alt:"image",rounded:!0,src:e.image}))),l.a.createElement(I.a,null,l.a.createElement(S.a,null,l.a.createElement("div",{className:"book-card-title"},e.title))),l.a.createElement(I.a,null,l.a.createElement(S.a,null,e.author)),l.a.createElement(I.a,null,l.a.createElement(S.a,null,l.a.createElement("span",null,e.price),l.a.createElement("span",null,e.currency))),l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"book-date"},e.date)),l.a.createElement(I.a,null,l.a.createElement(S.a,null,l.a.createElement(U,{variant:"secondary",genres:e.genre}))))}))),l.a.createElement(S.a,{className:"col-md-1"})):l.a.createElement(_,null)},P=(a(162),a(105)),R=a.n(P),X=a(67),H=a.n(X),J=function(e,t,a){a(e,t)},K=function(e){var t=e.genres,a=e.bookid,n=e.handleAddGenre;return t.map(function(e){return l.a.createElement(H.a.Item,{id:a,name:e,key:e,onClick:J.bind(void 0,e,a,n)},e)})},V=(a(192),function(e){var t=e.bookid,a=e.genres,n=e.handleAddGenre;return l.a.createElement(R.a,{id:"dropdown-basic-button",className:"dropdown-container",title:"Seleccionar g\xe9nero",variant:"secondary"},l.a.createElement(K,{genres:a,bookid:t,handleAddGenre:n}))}),W=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).onBookUpdate=a.onBookUpdate.bind(Object(b.a)(Object(b.a)(a))),a.onDeleteBook=a.onDeleteBook.bind(Object(b.a)(Object(b.a)(a))),a.state={showDeleteButton:!0},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"onBookUpdate",value:function(e){var t=e.currentTarget,a=t.value,n=t.name,l=t.id;(0,this.props.handleOnChangeEditBook)(a,n,l)}},{key:"onDeleteBook",value:function(e){var t=e.currentTarget.id;(0,this.props.handleDeleteBook)(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.genres,r=t.handleDeleteGenre,o=t.handleAddGenre;return l.a.createElement("li",null,a.map(function(t){return l.a.createElement("div",{className:"edit-container",key:t.id},l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"col-12 fa-times-container"},l.a.createElement("i",{className:"far fa-times-circle fa-times-custom",id:t.id,onClick:e.onDeleteBook}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"col-12"},l.a.createElement("img",{className:"image-edit-book",alt:"book-front",src:t.image}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{className:"col-12"},l.a.createElement("label",{className:"label-edit"},"Title:"),l.a.createElement("input",{className:"title-edit-book",type:"text",id:t.id,name:"title",value:t.title,onChange:e.onBookUpdate}),l.a.createElement("label",{className:"label-edit"},"Price:"),l.a.createElement("input",{className:"title-edit-book",type:"number",id:t.id,name:"price",value:t.price,onChange:e.onBookUpdate}),l.a.createElement("label",{className:"label-edit"},"Genres:"),l.a.createElement(U,{genres:t.genre,bookid:t.id.toString(),showDeleteButton:e.state.showDeleteButton,handleDeleteGenre:r}),l.a.createElement(V,{bookid:t.id,genres:n,handleAddGenre:o}))))}))}}]),t}(n.Component),Y=(a(193),function(e){var t=e.type,a=e.buttonStyle,n=e.children,r=e.handleBtnClick;return l.a.createElement("button",{className:a,type:t,onClick:r},n)}),Z=(a(194),function(e){var t=e.labelText,a=e.inputStyle,r=e.type,o=e.name,i=e.handleInputChange;return l.a.createElement(n.Fragment,null,l.a.createElement("label",null,t),l.a.createElement("div",null,l.a.createElement("input",{className:a,type:r,name:o,onChange:i})))}),q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={image:"",currency:"\u20ac",author:"",date:"",title:"",price:"",id:a.props.maxID,genre:[],showDeleteButton:!0},a.onChangeField=a.onChangeField.bind(Object(b.a)(Object(b.a)(a))),a.addGenreOnNewBook=a.addGenreOnNewBook.bind(Object(b.a)(Object(b.a)(a))),a.deleteGenreOnNewBook=a.deleteGenreOnNewBook.bind(Object(b.a)(Object(b.a)(a))),a.onAddBook=a.onAddBook.bind(Object(b.a)(Object(b.a)(a))),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"onChangeField",value:function(e){var t=e.currentTarget.name,a=e.currentTarget.value;this.setState(Object(c.a)({},t,a))}},{key:"addGenreOnNewBook",value:function(e){var t=this.state.genre;-1===t.indexOf(e)&&(t.push(e),this.setState({genre:t}))}},{key:"deleteGenreOnNewBook",value:function(e){this.setState(function(t){return{genre:t.genre.filter(function(t){return t!==e})}})}},{key:"onAddBook",value:function(e){e.preventDefault();var t=this.props.handleBtnClick,a=this.state;t({image:a.image||k.DEFAULT_PICTURE,currency:a.currency,author:a.author,date:a.date,title:a.title,price:a.price,id:a.id,genre:a.genre})}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleClose,n=t.genres,r=t.maxID;return l.a.createElement("div",{onSubmit:this.onAddBook},l.a.createElement(I.a,null,l.a.createElement(S.a,{md:11}),l.a.createElement(S.a,{md:1,className:"text-right"},l.a.createElement("i",{className:"far fa-times-circle fa-times-custom",onClick:a}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{md:12},l.a.createElement(Z,{type:"text",name:"image",labelText:"Image:",inputStyle:"label-edit",handleInputChange:this.onChangeField}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{md:12},l.a.createElement(Z,{type:"text",name:"author",labelText:"Author:",inputStyle:"label-edit",handleInputChange:this.onChangeField}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{md:12},l.a.createElement(Z,{type:"text",name:"title",labelText:"Title:",inputStyle:"label-edit",handleInputChange:this.onChangeField}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{md:12},l.a.createElement(Z,{type:"number",name:"price",labelText:"Price:",inputStyle:"label-edit",handleInputChange:this.onChangeField}))),l.a.createElement(I.a,null,l.a.createElement(S.a,null,l.a.createElement(U,{variant:"secondary",genres:this.state.genre,showDeleteButton:this.state.showDeleteButton,handleDeleteGenre:this.deleteGenreOnNewBook}))),l.a.createElement(I.a,null,l.a.createElement(S.a,null,l.a.createElement(V,{genres:n,bookid:r.toString(),handleAddGenre:this.addGenreOnNewBook}))),l.a.createElement(I.a,null,l.a.createElement(S.a,{md:12,className:"text-right"},l.a.createElement(Y,{type:"submit",buttonStyle:"filter-item",handleBtnClick:function(t){e.onAddBook(t),a()}},"Aceptar"))))}}]),t}(n.Component),Q=(a(195),function(e){var t=e.handleClose,a=e.handleBtnClick,n=e.handleAddGenre,r=e.handleDeleteGenre,o=e.genres,i=e.maxID;return l.a.createElement("section",{className:"modal-main"},l.a.createElement(q,{handleClose:t,handleBtnClick:a,handleAddGenre:n,handleDeleteGenre:r,genres:o,maxID:i}))}),$=(a(196),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).hideModal=function(){a.setState({showModal:!1})},a.showModal=a.showModal.bind(Object(b.a)(Object(b.a)(a))),a.state={showModal:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"showModal",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.genres,n=e.handleDeleteBook,r=e.handleOnChangeEditBook,o=e.handleDeleteGenre,i=e.handleAddGenre,c=e.handleAddBook,s=e.maxID;return l.a.createElement("ul",{className:"edit-book-catalog-container"},l.a.createElement(I.a,null,l.a.createElement(S.a,{md:2}),l.a.createElement(S.a,{md:8},l.a.createElement("div",{className:"add-new-book-container"},l.a.createElement(Y,{type:"button",buttonStyle:"filter-item",handleBtnClick:this.showModal},"  Add New Book",l.a.createElement("span",{className:"add-new-book-icon"},l.a.createElement("i",{className:"fas fa-plus-circle"})))),l.a.createElement(W,{handleDeleteBook:n,handleAddGenre:i,handleOnChangeEditBook:r,handleDeleteGenre:o,books:t,genres:a}),this.state.showModal?l.a.createElement(Q,{handleClose:this.hideModal,handleBtnClick:c,handleAddGenre:i,genres:a,maxID:s,handleDeleteGenre:o}):null),l.a.createElement(S.a,{md:2})))}}]),t}(n.Component)),ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,books:[]},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.close,r=e.books,o=e.maxID,i=e.genres,c=e.isLoaded,s=e.error,d=e.handleFilterChange,m=e.handleDeleteBook,u=e.handleOnChangeEditBook,h=e.handleAddBook,g=e.handleDeleteGenre,b=e.handleAddGenre,k=e.filtersChecked,p=e.isFilterClicked,f=l.a.createElement(n.Fragment,null,l.a.createElement(w,{genres:i,handleFilterChange:d,filtersChecked:k,isFilterClicked:p}),l.a.createElement(z,{books:r,isLoaded:c,error:s}));return l.a.createElement("div",{className:"app-content"},l.a.createElement(y.a,null,l.a.createElement(j.a,{exact:!0,path:"/",render:function(){return f}}),l.a.createElement(j.a,{path:"/edit",render:function(){return l.a.createElement($,{show:t,genres:i,close:a,books:r,maxID:o,handleDeleteBook:m,handleOnChangeEditBook:u,handleAddBook:h,handleDeleteGenre:g,handleAddGenre:b})}})))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).openModalHandler=function(){a.setState({isShowing:!0})},a.closeModalHandler=function(){a.setState({isShowing:!1})},a.state={isLoaded:!1,books:[],originalBooks:[],error:!1,filtersChecked:[],isFilterClicked:!1,isShowing:!1,genres:[],maxID:""},a.handleFilterChange=a.handleFilterChange.bind(Object(b.a)(Object(b.a)(a))),a.mapIntoArray=a.mapIntoArray.bind(Object(b.a)(Object(b.a)(a))),a.handleDeleteBook=a.handleDeleteBook.bind(Object(b.a)(Object(b.a)(a))),a.handleOnChangeEditBook=a.handleOnChangeEditBook.bind(Object(b.a)(Object(b.a)(a))),a.handleAddBook=a.handleAddBook.bind(Object(b.a)(Object(b.a)(a))),a.handleDeleteGenre=a.handleDeleteGenre.bind(Object(b.a)(Object(b.a)(a))),a.handleAddGenre=a.handleAddGenre.bind(Object(b.a)(Object(b.a)(a))),a.setStateFilters=a.setStateFilters.bind(Object(b.a)(Object(b.a)(a))),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=["novel","psychology","cinema","fiction","drama"],a={0:{author:"Edwidge Danticat",currency:"\u20ac",date:"2013",genre:["fiction"],id:"0",image:"https://images-na.ssl-images-amazon.com/images/I/51FR9xhv3uL._SX322_BO1,204,203,200_.jpg",price:24.9,title:"Claire of the sea light"},1:{author:"Vicente Molina Foix",currency:"\u20ac",date:"2019",genre:["cinema"],id:"1",image:"https://imagessl7.casadellibro.com/a/l/t5/97/9788433916297.jpg",price:8.9,title:"Kubrick en casa"},2:{author:"Dan Brown",currency:"\u20ac",date:"2013",genre:["novel"],id:"2",image:"https://static1planetadelibroscom.cdnstatics.com/usuaris/libros/fotos/291/m_libros/portada_origen_dan-brown_201812262335.jpg",price:12.95,title:"Origen"},3:{author:"Antonio Iturbe",currency:"\u20ac",date:"2013",genre:["drama"],id:"3",image:"https://images-na.ssl-images-amazon.com/images/I/51WZ1-hfixL._SX330_BO1,204,203,200_.jpg",price:9.45,title:"La bibliotecaria de Auschwitz"},4:{author:"Carmen Mola",currency:"\u20ac",date:"2019",genre:["novel"],id:"4",image:"https://imagessl2.casadellibro.com/a/l/t5/72/9788420435572.jpg",price:18.9,title:"La red p\xfarpura"},5:{author:"Victor Frankl",currency:"\u20ac",date:"2015",genre:["psychology","novel"],id:"5",image:"https://images-na.ssl-images-amazon.com/images/I/51FK1XAlsYL._SX324_BO1,204,203,200_.jpg",price:12.25,title:"El hombre en busca de sentido"}};fetch(k.API_URL).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,books:e.mapIntoArray(t.catalog),originalBooks:e.mapIntoArray(t.catalog)})},function(t){e.setState({isLoaded:!0,books:e.mapIntoArray(a),originalBooks:e.mapIntoArray(a)})}),this.setState({genres:t,maxID:this.mapIntoArray(a).length+1})}},{key:"mapIntoArray",value:function(e){var t=[];return Object.keys(e).filter(function(a){return t.push(e[a])}),t}},{key:"render",value:function(){var e=this.state,t=e.books,a=e.maxID,n=e.genres,r=e.isLoaded,o=e.error,i=e.filtersChecked,c=e.isFilterClicked;return l.a.createElement("div",{className:"App"},l.a.createElement(C,null),l.a.createElement(ee,{show:this.state.isShowing,close:this.closeModalHandler,books:t,maxID:a.toString(),genres:n,isLoaded:r,error:o,handleFilterChange:this.handleFilterChange,handleDeleteBook:this.handleDeleteBook,handleAddGenre:this.handleAddGenre,handleAddBook:this.handleAddBook,handleDeleteGenre:this.handleDeleteGenre,handleOnChangeEditBook:this.handleOnChangeEditBook,filtersChecked:i,isFilterClicked:c}))}},{key:"handleFilterChange",value:function(e){var t=this.state,a=t.filtersChecked,n=t.originalBooks;if(a.indexOf(e)>=0){console.log("existe");var l=a.indexOf(e);a.splice(l,1)}else console.log("no existe"),a.push(e);if(0!==a.length){var r=n.filter(function(e){return e.genre.some(function(e){return a.indexOf(e)>=0})});this.setStateFilters(r)}else this.setStateFilters(n)}},{key:"setStateFilters",value:function(e){this.setState({books:e})}},{key:"handleDeleteBook",value:function(e){this.setState(function(t){var a=t.books.filter(function(t){return parseInt(t.id)!==parseInt(e)});return{books:a,originalBooks:a}})}},{key:"handleAddBook",value:function(e){this.setState(function(t){var a=t.books.concat(e);return{books:a,originalBooks:a,maxID:t.maxID+1}})}},{key:"handleDeleteGenre",value:function(e,t){this.setState(function(a){var n=a.books.map(function(a){if(parseInt(a.id)===parseInt(t)){var n=a.genre.filter(function(t){return t!==e});return a=Object(s.a)({},a,{genre:n})}return a});return{books:n,originalBooks:n}})}},{key:"handleAddGenre",value:function(e,t){this.setState(function(a){var n=a.books.map(function(a){return parseInt(a.id)===parseInt(t)&&-1===a.genre.indexOf(e)?(a.genre=a.genre.concat(e),a):a});return{books:n,originalBooks:n}})}},{key:"handleOnChangeEditBook",value:function(e,t,a){this.setState(function(n){var l=n.books.map(function(n){return parseInt(n.id)===parseInt(a)&&(n=Object(s.a)({},n,Object(c.a)({},t,e))),n});return{books:l,originalBooks:l}})}}]),t}(n.Component);o.a.render(l.a.createElement(i.a,null,l.a.createElement(te,null)),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.55c1e60e.chunk.js.map